{"lockfile-version":1,"manifest":{"hook":{"on-activate":"\nexport PGDIR=\"$FLOX_ENV_CACHE/postgres\"\nexport PGDATA=$PGDIR/data\nexport PGHOST=$PGDIR/run\nexport PGCONFIGFILE=\"$PGDIR/postgresql.conf\"\nexport LOG_PATH=$PGHOST/LOG\nexport SESSION_SECRET=\"$USER-session-secret\"\nexport DATABASE_URL=\"postgresql:///$PGDATABASE?host=$PGHOST&port=$PGPORT\"\n\nif [[ ! -d \"$PGHOST\" ]]; then\n  mkdir -p \"$PGHOST\"\nfi\n\nif [[ ! -d \"$PGDATA\" ]]; then\n  mkdir -p \"$PGDATA\"\n  pg_initdb() {\n    initdb \"$PGDATA\" \\\n      --locale=C \\\n      --encoding=UTF8 \\\n      -A md5 \\\n      --auth=trust \\\n      --username $PGUSER \\\n      --pwfile=<(echo $PGPASS)\n  }\n  export -f pg_initdb  # This is needed for gum to be able to call function\n  if [[ \"$FLOX_ENVS_TESTING\" == \"1\" ]]; then\n    pg_initdb\n  else\n    gum spin --spinner dot --title \"Running initdb in $PGDATA\" -- bash -c pg_initdb\n  fi\n  echo \"‚úÖ Initialize PostgreSQL ($PGDATA)\"\n\nfi\n\n\n#\nif [[ ! -f \"$PGCONFIGFILE\" ]]; then\n  tee -a $PGCONFIGFILE > /dev/null << EOF\nlisten_addresses = '$PGHOSTADDR';\nport = '$PGPORT';\nunix_socket_directories = '$PGHOST';\nunix_socket_permissions = '0700';\nEOF\n  echo \"‚úÖ Configure PostgreSQL ($PGCONFIGFILE)\"\nfi\n\npg_ctl -D \"$PGDATA\" -w start -o \"-c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT\" > /dev/null\nif psql -lqt | cut -d \\| -f 1 | grep -qw $PGDATABASE; then\n  echo \"‚úÖ Database '$PGDATABASE' already exists\"\nelse\n  createdb\n  echo \"‚úÖ Database '$PGDATABASE' created\"\nfi\npg_ctl -D \"$PGDATA\" -m fast -w stop > /dev/null\n\n"},"install":{"gum":{"pkg-path":"gum"},"postgresql":{"pkg-path":"postgresql_16"}},"options":{"allow":{"licenses":[]},"semver":{},"systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"]},"profile":{"common":"echo \"\"\necho \"     ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\"\necho \"     ‚ïë                                               ‚ïë\"\necho \"     ‚ïë  Start PostgreSQL in the background:          ‚ïë\"\necho \"     ‚ïë  üëâ flox services start                       ‚ïë\"\necho \"     ‚ïë  üëâ flox activate --start-services            ‚ïë\"\necho \"     ‚ïë                                               ‚ïë\"\necho \"     ‚ïë  Try to connect to PostgreSQL:                ‚ïë\"\necho \"     ‚ïë  üëâ psql                                      ‚ïë\"\necho \"     ‚ïë                                               ‚ïë\"\necho \"     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\"\necho \"\"\n"},"services":{"postgres":{"command":"postgres -D $PGDATA -c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT","is-daemon":null,"shutdown":null,"systems":null,"vars":null}},"vars":{"PGDATABASE":"pgdb","PGHOSTADDR":"127.0.0.1","PGPASS":"pgpass","PGPORT":"15432","PGUSER":"pguser"},"version":1},"packages":[{"attr_path":"gum","broken":false,"derivation":"/nix/store/ippvngi4fvlm7wcjv66q35882kk0d782-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"gum-0.14.5","outputs":{"out":"/nix/store/s4yb9a7cvj5vd5yw0nvssf51lmpa5id0-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"aarch64-darwin","unfree":false,"version":"0.14.5"},{"attr_path":"gum","broken":false,"derivation":"/nix/store/yjf86f3qgpirr5lc9wsds4nlqyf8riw0-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"gum-0.14.5","outputs":{"out":"/nix/store/bw0ii1jjvxd8albrmvi0lin6h1ssz4yi-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"aarch64-linux","unfree":false,"version":"0.14.5"},{"attr_path":"gum","broken":false,"derivation":"/nix/store/db7hhax9rfpj0gl677sqcm1s5gfjkmrc-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"gum-0.14.5","outputs":{"out":"/nix/store/zidlqhd8qq8wljvm38j1j4izx8ww7aps-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"x86_64-darwin","unfree":false,"version":"0.14.5"},{"attr_path":"gum","broken":false,"derivation":"/nix/store/vsq73s5cq771rh6nz9hsjhiy74xsyh1r-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"gum-0.14.5","outputs":{"out":"/nix/store/kma26ygxqp39pm6fl32yjach0czasc3j-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"x86_64-linux","unfree":false,"version":"0.14.5"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/44gs445ka3x92hbc6s5dmr09czhvhbg0-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"postgresql-16.4","outputs":{"dev":"/nix/store/afjpl8ilq8s6j6zh4qqyy6mxz3v2xbav-postgresql-16.4-dev","doc":"/nix/store/ry9d9by692xj92y5b9j6z0aa5y3lh3px-postgresql-16.4-doc","lib":"/nix/store/d1im42w02x8gl2y380r4hgj8xgkkkbwc-postgresql-16.4-lib","man":"/nix/store/z1n2vh799a5icpaxbrjfqsasagb276bk-postgresql-16.4-man","out":"/nix/store/6dzxj78wph840cpwslh96s4gpm0iwch2-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"aarch64-darwin","unfree":false,"version":"postgresql-16.4"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/j4cyms2f9bwxb4li5pbqvfv8jmkmi6hl-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"postgresql-16.4","outputs":{"debug":"/nix/store/71hz4hv1n6ivymbzd0jm3a61cyj9fwh5-postgresql-16.4-debug","dev":"/nix/store/ibhwvhq4gkdibkfrkqg9vmip9mhhrg2q-postgresql-16.4-dev","doc":"/nix/store/rmvkab0pxjjjznk350syr3gzpa13dz1k-postgresql-16.4-doc","lib":"/nix/store/39mnmp40qhpq2h6r3cj66s23sb5fkzr6-postgresql-16.4-lib","man":"/nix/store/mawnv85hv5y64csbmpgrnz88j7r8cby5-postgresql-16.4-man","out":"/nix/store/37r0vmsb8xd1kv3wjd99kr59q99ja3g0-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"aarch64-linux","unfree":false,"version":"postgresql-16.4"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/8mbw30z97my2f56cw1djqx0sk5aj8jl6-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"postgresql-16.4","outputs":{"dev":"/nix/store/96nxx00m06jl2jmvb16916l2rpwb13hk-postgresql-16.4-dev","doc":"/nix/store/r03r96a44grl85sflw6hvwwlrzr32rk9-postgresql-16.4-doc","lib":"/nix/store/cy3q9y20jwk1vkd6jxf3mnq6xzbb9dn8-postgresql-16.4-lib","man":"/nix/store/2wm2caki07a557z97228n2zxrd3a8j4b-postgresql-16.4-man","out":"/nix/store/vlgydd1rakmw9j14i8dgrlhzj4pa82vi-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"x86_64-darwin","unfree":false,"version":"postgresql-16.4"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/gr6sh73djiyh7rgam5mcn6146js03pxi-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","name":"postgresql-16.4","outputs":{"debug":"/nix/store/alcnsd7fkkr3iipvcn9gzsyv16kab6m9-postgresql-16.4-debug","dev":"/nix/store/pqya8lq5jyplfmbmafrrwsrsi07d5ssn-postgresql-16.4-dev","doc":"/nix/store/apbxfs52v8im9725mn2f1jhgbdfggrpd-postgresql-16.4-doc","lib":"/nix/store/32cprs7xwxvb0rw2imfrgy5vcacc27hc-postgresql-16.4-lib","man":"/nix/store/b8cvsw47h2487y4j805zi0645x3ajh1i-postgresql-16.4-man","out":"/nix/store/mjjfx6yyaaba5hmv6bga20m8fxrca93l-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"4c2fcb090b1f3e5b47eaa7bd33913b574a11e0a0","rev_count":694395,"rev_date":"2024-10-18T13:02:40Z","scrape_date":"2024-10-20T03:56:48Z","stabilities":["unstable"],"system":"x86_64-linux","unfree":false,"version":"postgresql-16.4"}]}