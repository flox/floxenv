{"lockfile-version":1,"manifest":{"hook":{"on-activate":"\nexport PGDIR=\"$FLOX_ENV_CACHE/postgres\"\nexport PGDATA=$PGDIR/data\nexport PGHOST=$PGDIR/run\nexport PGCONFIGFILE=\"$PGDIR/postgresql.conf\"\nexport LOG_PATH=$PGHOST/LOG\nexport SESSION_SECRET=\"$USER-session-secret\"\nexport DATABASE_URL=\"postgresql:///$PGDATABASE?host=$PGHOST&port=$PGPORT\"\n\nif [[ ! -d \"$PGHOST\" ]]; then\n  mkdir -p \"$PGHOST\"\nfi\n\nif [[ ! -d \"$PGDATA\" ]]; then\n  mkdir -p \"$PGDATA\"\n  pg_initdb() {\n    initdb \"$PGDATA\" \\\n      --locale=C \\\n      --encoding=UTF8 \\\n      -A md5 \\\n      --auth=trust \\\n      --username $PGUSER \\\n      --pwfile=<(echo $PGPASS)\n  }\n  export -f pg_initdb  # This is needed for gum to be able to call function\n  if [[ \"$FLOX_ENVS_TESTING\" == \"1\" ]]; then\n    pg_initdb\n  else\n    gum spin --spinner dot --title \"Running initdb in $PGDATA\" -- bash -c pg_initdb\n  fi\n  echo \"‚úÖ Initialize PostgreSQL ($PGDATA)\"\n\nfi\n\n\n#\nif [[ ! -f \"$PGCONFIGFILE\" ]]; then\n  tee -a $PGCONFIGFILE > /dev/null << EOF\nlisten_addresses = '$PGHOSTADDR';\nport = '$PGPORT';\nunix_socket_directories = '$PGHOST';\nunix_socket_permissions = '0700';\nEOF\n  echo \"‚úÖ Configure PostgreSQL ($PGCONFIGFILE)\"\nfi\n\npg_ctl -D \"$PGDATA\" -w start -o \"-c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT\" > /dev/null\nif psql -lqt | cut -d \\| -f 1 | grep -qw $PGDATABASE; then\n  echo \"‚úÖ Database '$PGDATABASE' already exists\"\nelse\n  createdb\n  echo \"‚úÖ Database '$PGDATABASE' created\"\nfi\npg_ctl -D \"$PGDATA\" -m fast -w stop > /dev/null\n\n"},"install":{"gum":{"pkg-path":"gum"},"postgresql":{"pkg-path":"postgresql_16"}},"options":{"allow":{"licenses":[]},"semver":{},"systems":["aarch64-darwin","aarch64-linux","x86_64-darwin","x86_64-linux"]},"profile":{"common":"echo \"\"\necho \"     ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\"\necho \"     ‚ïë                                               ‚ïë\"\necho \"     ‚ïë  Start PostgreSQL in the background:          ‚ïë\"\necho \"     ‚ïë  üëâ flox services start                       ‚ïë\"\necho \"     ‚ïë  üëâ flox activate --start-services            ‚ïë\"\necho \"     ‚ïë                                               ‚ïë\"\necho \"     ‚ïë  Try to connect to PostgreSQL:                ‚ïë\"\necho \"     ‚ïë  üëâ psql                                      ‚ïë\"\necho \"     ‚ïë                                               ‚ïë\"\necho \"     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\"\necho \"\"\n"},"services":{"postgres":{"command":"postgres -D $PGDATA -c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT","is-daemon":null,"shutdown":null,"systems":null,"vars":null}},"vars":{"PGDATABASE":"pgdb","PGHOSTADDR":"127.0.0.1","PGPASS":"pgpass","PGPORT":"15432","PGUSER":"pguser"},"version":1},"packages":[{"attr_path":"gum","broken":false,"derivation":"/nix/store/sd2srnb6d2qsj3kamc0wnhpq1y9phpll-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"gum-0.14.5","outputs":{"out":"/nix/store/yc1i3xn1aj5abcigi4h3yhr1migrb8wy-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"aarch64-darwin","unfree":false,"version":"0.14.5"},{"attr_path":"gum","broken":false,"derivation":"/nix/store/l9ln22mwn0x5rfffr8aa2zylwby9kzkw-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"gum-0.14.5","outputs":{"out":"/nix/store/n7hrvg1wi6li9kaa1jgknnbdyzpa2kwz-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"aarch64-linux","unfree":false,"version":"0.14.5"},{"attr_path":"gum","broken":false,"derivation":"/nix/store/rgfzq95bw2rzmvc9swv2nq9qwa7zr6w9-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"gum-0.14.5","outputs":{"out":"/nix/store/962s45naidrx79v7p0q94xg5s2aq7i6v-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"x86_64-darwin","unfree":false,"version":"0.14.5"},{"attr_path":"gum","broken":false,"derivation":"/nix/store/0fginxfwrx3q9b8ahzhzkgfi84cjzwy4-gum-0.14.5.drv","description":"Tasty Bubble Gum for your shell","group":"toplevel","install_id":"gum","license":"MIT","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"gum-0.14.5","outputs":{"out":"/nix/store/0bsz576va04hm8fgpsjlspjclmc1wkik-gum-0.14.5"},"outputs_to_install":["out"],"pname":"gum","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"x86_64-linux","unfree":false,"version":"0.14.5"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/svbnkhb26032jvmpjp0imv64lxpjh18m-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"postgresql-16.4","outputs":{"dev":"/nix/store/7dlym60qc7jmhm8d44f7dsnaghb7xdvk-postgresql-16.4-dev","doc":"/nix/store/pqrjg70wwgam8rq48cm1yibk87iy81cg-postgresql-16.4-doc","lib":"/nix/store/1n8ppphidl1nprqdnc70jqd9bnnqbhz0-postgresql-16.4-lib","man":"/nix/store/vm90nyq3v42gka36vfxgyvbsqgavf30h-postgresql-16.4-man","out":"/nix/store/njzzxcv9qbvpc3as73zynk8i30qlfkyk-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"aarch64-darwin","unfree":false,"version":"postgresql-16.4"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/9zzv0dw2ams49w2i4jsf1s3jc5a1vgx6-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"postgresql-16.4","outputs":{"debug":"/nix/store/4b6pzkw3sw3d1xz31ba0h82sk4m9q7ch-postgresql-16.4-debug","dev":"/nix/store/nw8xyfklwnp9afjywa89q9v549mdmx9s-postgresql-16.4-dev","doc":"/nix/store/w7af6r825fwlgdfr5q8gn906mg5522fb-postgresql-16.4-doc","lib":"/nix/store/7kg75r4716xf0pf15igpdcdlczhp981x-postgresql-16.4-lib","man":"/nix/store/fmkxhxwjfd8v428vbhzhz7myh2d4jx26-postgresql-16.4-man","out":"/nix/store/h0kz668dqw9c3d4vx4c28ikn4b8hgds4-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"aarch64-linux","unfree":false,"version":"postgresql-16.4"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/5pwc2r60xzlk51jr7g4953dql0askyja-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"postgresql-16.4","outputs":{"dev":"/nix/store/mb1x8id6pjm1j2wvbrpmxbnpaj91hvp8-postgresql-16.4-dev","doc":"/nix/store/7n6zyhmk7yki0kzfmbxvjjyrb9qskfv8-postgresql-16.4-doc","lib":"/nix/store/vdfbff4iad2nv03dzmgpp8axx5n50xmb-postgresql-16.4-lib","man":"/nix/store/vrbawdhrrvvliqjr0g53804rqrcxnpfq-postgresql-16.4-man","out":"/nix/store/8r8zgm795png9iwbc9sv296d4rvc494a-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"x86_64-darwin","unfree":false,"version":"postgresql-16.4"},{"attr_path":"postgresql_16","broken":false,"derivation":"/nix/store/aif5b3rdlfmirmcisq78p0wc0gc8gc8k-postgresql-16.4.drv","description":"Powerful, open source object-relational database system","group":"toplevel","install_id":"postgresql","license":"PostgreSQL","locked_url":"https://github.com/flox/nixpkgs?rev=76612b17c0ce71689921ca12d9ffdc9c23ce40b2","name":"postgresql-16.4","outputs":{"debug":"/nix/store/krb6fp58dkx0v1w6ljgsc1q4fa9px38b-postgresql-16.4-debug","dev":"/nix/store/a1y4jday73043sr9jdkl45x86fc4bz6b-postgresql-16.4-dev","doc":"/nix/store/aimqn571cc15g9dylir4sg9hddsx9vk4-postgresql-16.4-doc","lib":"/nix/store/y44iixsj2fd1pcy8ny66809z8r6zlxag-postgresql-16.4-lib","man":"/nix/store/h2kawzk00cnmqvbp860hispl7rr8dyij-postgresql-16.4-man","out":"/nix/store/wc1a06ip2fajrjkfbw7cvxzw1c949a6g-postgresql-16.4"},"outputs_to_install":["out","man"],"pname":"postgresql_16","priority":5,"rev":"76612b17c0ce71689921ca12d9ffdc9c23ce40b2","rev_count":705705,"rev_date":"2024-11-09T08:06:34Z","scrape_date":"2024-11-11T03:57:18Z","stabilities":["unstable"],"system":"x86_64-linux","unfree":false,"version":"postgresql-16.4"}]}